---
/**
 * SectionHeader - Consistent section heading pattern
 *
 * Provides standardized H2 typography with optional highlighted word,
 * subtitle, and flexible alignment.
 *
 * @example Basic usage
 * <SectionHeader title="Our Services" />
 *
 * @example With highlighted word
 * <SectionHeader title="Our Growth Process" highlightWord="Process" />
 *
 * @example With subtitle
 * <SectionHeader
 *   title="Frequently Asked Questions"
 *   highlightWord="Questions"
 *   subtitle="Find answers to common questions about our services."
 * />
 *
 * @example Dark background
 * <SectionHeader title="Our Approach" variant="dark" />
 */

interface Props {
  /** Section title text */
  title: string;
  /** Word to highlight (will be styled differently) */
  highlightWord?: string;
  /** Optional subtitle/description below the title */
  subtitle?: string;
  /** Color variant */
  variant?: 'light' | 'dark';
  /** Text alignment */
  align?: 'left' | 'center';
  /** Additional classes for the container */
  class?: string;
  /** Heading level (default: h2) */
  as?: 'h1' | 'h2' | 'h3';
}

const {
  title,
  highlightWord,
  subtitle,
  variant = 'light',
  align = 'left',
  class: className = '',
  as: Tag = 'h2',
} = Astro.props;

// Split title to highlight the specified word
function formatTitle(text: string, highlight?: string) {
  if (!highlight) return [text];
  return text.split(new RegExp(`(${highlight})`, 'i'));
}

const titleParts = formatTitle(title, highlightWord);

// Color classes based on variant
const titleColor = variant === 'dark' ? 'text-white' : 'text-surface-900';
const highlightColor = variant === 'dark' ? 'text-surface-500' : 'text-primary-600';
const subtitleColor = variant === 'dark' ? 'text-surface-400' : 'text-surface-600';

// Alignment classes
const alignClass = align === 'center' ? 'text-center' : '';
---

<div class:list={[alignClass, className]}>
  <Tag class:list={[
    "text-2xl sm:text-3xl md:text-4xl font-medium",
    titleColor
  ]}>
    {highlightWord ? (
      titleParts.map((part) =>
        part.toLowerCase() === highlightWord.toLowerCase()
          ? <span class={highlightColor}>{part}</span>
          : part
      )
    ) : (
      <Fragment set:html={title} />
    )}
  </Tag>
  {subtitle && (
    <p class:list={["mt-4 text-lg", subtitleColor, align === 'center' ? 'max-w-2xl mx-auto' : '']}>
      <Fragment set:html={subtitle} />
    </p>
  )}
</div>
